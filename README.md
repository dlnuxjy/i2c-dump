# i2cget-dump
因为i2cdump总是报错 i2cdump: block read failed，但是i2cget正常，所以使用i2cget来实现i2cdump格式的输出
# 命令格式
i2cget-dump.sh i2c-id i2c-address

i2c-id 是i2c总线编号，i2c-address是i2c设备地址

例子:
```shell
i2cget-dump.sh 0 0x5b
```
# 显示输出格式
```shell
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00: 00 a0 00 00 00 00 00 ff 00 00 00 ff 00 00 00 6d
10: 00 00 00 00 00 00 00 00 83 01 00 00 00 00 00 00
20: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
70: 00 00 00 00 00 00 00 00 XX 00 00 00 00 00 00 00
80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
```
## 读取错误时，显示XX

# i2c-tools使用方法
i2c-tools是一系列的命令i2cdetect, i2cdump, i2cget, i2cset，用于调试i2c的工具。
## i2cdetect检测i2c总线
```shell
# i2cdetect -l
i2c-0   i2c             i2c.0                                   I2C adapter
i2c-1   i2c             i2c.1                                   I2C adapter
i2c-2   i2c             i2c.2                                   I2C adapter
i2c-3   i2c             i2c.3                                   I2C adapter
i2c-4   i2c             16340000.i2c                            I2C adapter
```
## i2cdetect检测挂载在i2c总线上设备
检测总线0上的设备
```shell
# i2cdetect -r -y 0
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- --
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
50: -- -- -- -- -- -- -- -- -- -- UU 5b -- -- -- --
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
```
## i2cdump查看器件所有寄存器的值
查看总线0，地址0x5b所有寄存器的值
```shell
i2cdump -f -y 0 0x5b
```
## i2cget 看单个寄存器的值
查看总线0，地址0x5b，寄存器0x10的值
```shell
i2cget -f -y 0 0x5b 0x10
```
## i2cset 设置寄存器的值
将总线0，地址0x5b，寄存器0x10的值设置为0xff
```shell
i2cset -f -y 0 0x5b 0x10 0xff 
```

